<layout>
  <div class="max-w-2xl mx-auto mt-20 bg-bg-surface dark:bg-bg-surface rounded-xl shadow-lg overflow-hidden text-text-main dark:text-white">
    <!-- Banner and Edit Button -->
    <div class="relative bg-primary dark:bg-primary-dark h-40 flex items-center justify-center rounded-b-xl">
      <img
        src="assets/images/ProfileLogo.png"
        alt="Profile"
        class="w-32 h-32 rounded-full border-4 border-white absolute top-24 bg-white object-cover"
      />
      <!-- <button
        class="absolute top-4 right-4 bg-blue-800 hover:bg-blue-900 text-white rounded-full p-2 shadow"
        aria-label="Edit Profile"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-1.414.828l-4.243 1.414 1.414-4.243a4 4 0 01.828-1.414z" />
        </svg>
      </button> -->
    </div>
  
    <!-- Profile Info -->
    <div class="pt-20 pb-8 px-8">
      <div *ngIf="!user"> Chargement... </div>
      <div *ngIf="user">
        <h2 class="text-2xl font-bold mb-2">{{user.username }}</h2>
        <a
          class="text-primary dark:text-primary-dark font-semibold cursor-pointer hover:underline"
          (click)="showFriends = true"
        >
          {{friends.length|| 0}} amis
        </a>
    
        <hr class="my-6" />
        <h3 class="text-xl font-bold mb-2">Historique</h3>
    
        <div *ngIf="history.length <= 0">Aucun historique pour le moment.</div>
        <div *ngIf="history.length > 0">
          <ul class="space-y-4">
            <li *ngFor="let session of history" class="flex items-center justify-between">
              <button (click)="goToQuiz(session.id)" class="flex items-center space-x-4">
                <!-- TODO: Replace with actual quiz icon -->
                <img
                  src="assets/images/quiz-icon.png"
                  alt="Quiz Icon"
                  class="w-10 h-10 rounded-full bg-gray-200 object-cover"
                />
                <div>
                  <h4 class="text-lg font-semibold">{{ session.nom }}</h4>
                </div>
              </button>
            </li>
          </ul>
        </div>
    
        <!-- Friend List Pop-up -->
        <div
          *ngIf="showFriends"
          class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
        >
          <div class="bg-bg-card dark:bg-bg-card rounded-lg shadow-lg p-6 w-full max-w-md relative">
            <button
              class="absolute top-1 right-3 text-text-secondary hover:text-text-main dark:text-text-secondary dark:hover:text-text-main text-2xl font-bold"
              (click)="showFriends = false"
              aria-label="Fermer"
            >
              &times;
            </button>
            <h4 class="text-lg font-bold mb-4">Liste d'amis</h4>
    
            <ul class="space-y-2">
              <li *ngFor="let friend of friends" class="text-text-main dark:text-text-main">{{ friend.username }}</li>
            </ul>
          </div>
        </div>
      </div>
      </div>
  </div>
</layout>
